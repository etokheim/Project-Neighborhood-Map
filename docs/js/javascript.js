function readMore(e){displays.featured.toggleAvailable(e),infoWindow.closeAll(),zmoothZoom(e,200)}function zmoothZoom(e,t,i){t=t||0,isZooming=!0,setTimeout(function(){i=displays.featured.maximize||function(){};var t,r=($(".featured_container").outerWidth()+80)/2,a=0,o=markers()[e].position,s=map.zoom,n=settings.zoomInAmount,l=Math.abs(s)-Math.abs(n);t=s<n?1:-1,!stopZooming&&isZooming?Math.abs(l)>=1?(map.panTo(getOffsetCenter(o,r,a)),setTimeout(function(){zmoothZoom(e),map.setZoom(s+1*t),map.setCenter(getOffsetCenter(o,r,a))},settings.zoomInterval)):(isZooming=!1,map.setZoom(n),map.setCenter(getOffsetCenter(o,r,a)),setTimeout(function(){"Fjelltur"==markers()[e].type.keywords[0]?map.setMapTypeId("satellite"):map.setMapTypeId(settings.defaultMapType)},150),setTimeout(function(){i()},settings.featuredMaximizeDelay)):(stopZooming=!1,isZooming=!1)},t)}function getOffsetCenter(e,t,i){var r;if("none"!==$(".featured_minimize").css("display"))return e;var a=Math.pow(2,map.getZoom()),o=map.getProjection().fromLatLngToPoint(e),s=new google.maps.Point(t/a||0,i/a||0),n=new google.maps.Point(o.x-s.x,o.y+s.y);return r=map.getProjection().fromPointToLatLng(n)}function resetZoomAndMap(){for(var e=new google.maps.LatLngBounds,t=0;t<markers().length;t++)e.extend(markers()[t].position);map.fitBounds(e),map.setMapTypeId(settings.defaultMapType)}function focusMarker(e){var t=markers()[e];displays.locationSwitcher.displayTip(!1),focusedMarker(e),moveToMarker(markers()[e]),infoWindow.closeAll(t),infoWindow.populate(t,new google.maps.InfoWindow),toggleBounce(t)}function moveToMarker(e){var t={lat:e.position.lat(),lng:e.position.lng()};map.panTo(t)}function toggleBounce(e){null!==e.getAnimation()?e.setAnimation(null):e.setAnimation(google.maps.Animation.BOUNCE)}function googleMapsError(){console.log("Wikipedia is not responding!"),$("#map").html('\t\t<div class="maps_error_container">\t\t\t<div class="maps_error">\t\t\t\t<i class="fa fa-google" aria-hidden="true"></i>\t\t\t\t<h1>Google Maps svarar ikkje!</h1>\t\t\t\t<p>\t\t\t\t\t<em>Vent litt og prøv på nytt.</em><br><br>\t\t\t\t\tDersom du trur det er ein feil i programmet; vennligst ta kontakt og vis til feilmeldingane i konsollen. (f12).\t\t\t\t</p>\t\t\t</div>\t\t</div>\t')}function initMap(){function e(){for(var e=new google.maps.LatLngBounds,t=0;t<markers().length;t++)markers()[t].setMap(map),e.extend(markers()[t].position);map.fitBounds(e)}console.log("Creating the map");var t=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}];map=new google.maps.Map(document.getElementById("map"),{center:{lat:40.7413549,lng:-73.9980244},styles:t,mapTypeControl:!1});for(var i=0;i<favoriteLocations.length;i++){var r=new google.maps.Marker({position:favoriteLocations[i].location,title:favoriteLocations[i].title,koTitle:ko.observable(favoriteLocations[i].title),animation:null,index:i,type:favoriteLocations[i].type,koVisible:ko.observable(!0),foursquareID:favoriteLocations[i].foursquareID,wikipedia:{hasContent:ko.observable(!1),url:ko.observable(""),ingress:ko.observable(""),bodyText:ko.observable(""),error:{hasError:ko.observable(!1),message:ko.observable("Kunne ikkje nå Wikipedia. Dersom du trur det er ein feil i programmet; vennligst ta kontakt og vis til feilmeldingane i konsollen. (f12).")}},flickr:{img:ko.observableArray([]),hasContent:ko.observable(!1),error:{hasError:ko.observable(!1),img:ko.observableArray([{url:"img/flickr-error.svg",credit:{name:"Kan ikkje nå Flickr"}}])}},foursquare:{error:{hasError:ko.observable(!1),message:ko.observable("Kunne ikkje nå Foursquare. Dersom du trur det er ein feil i programmet; vennligst ta kontakt og vis til feilmeldingane i konsollen. (f12)."),img:ko.observableArray([{url:"img/foursquare-error.svg",credit:{name:"Kan ikkje nå Foursquare"}}])},hasContent:ko.observable(!1),venue:ko.observable(),img:ko.observableArray([]),rating:ko.observable(),starCount:5,price:ko.observable(""),getRating:function(){this.rating("");for(var e=this.venue().rating,t=Math.round(e/2),i=0;i<5;i++)t>i?this.rating(this.rating()+'<i class="fa fa-star" data-bind=""></i>'):this.rating(this.rating()+'<i class="fa fa-star-o" data-bind=""></i>')},getPrice:function(){var e=void 0!==this.venue().price?this.venue().price.tier:"";1==e?this.price("Billig"):2==e?this.price("Ganske billig"):3==e?this.price("Dyrt"):4==e?this.price("Veldig dyrt"):this.price("Ukjent prisklasse")},calculate:function(){this.getRating(),this.getPrice()}},openweathermap:{hasContent:ko.observable(!1),data:ko.observable(),error:{hasError:ko.observable(!1),message:ko.observable("Kunne ikkje nå OpenWeatherMaps. Dersom du trur det er ein feil i programmet; vennligst ta kontakt og vis til feilmeldingane i konsollen. (f12).")}},getImages:function(){return this.foursquare.error.hasError()?this.foursquare.error.img():this.foursquare.hasContent()?this.foursquare.img():this.flickr.error.hasError()?this.flickr.error.img():this.flickr.img()},tipIsPositive:function(){return"disliked"!=this.authorInteractionType}});r.addListener("click",function(){this.infoWindow&&null!==this.infoWindow.anchor?this.infoWindow.close():(infoWindow.closeAll(this),infoWindow.populate(this,new google.maps.InfoWindow)),toggleBounce(this),focusMarker(this.index)}),markers.push(r)}e(),ajax.getExternalResources()}ko.bindingHandlers.click={init:function(e,t,i,r,a){var o=t(),s=0,n=200;$(e).click(function(e){if("object"==typeof o){var t=o.single,i=o.double;s++,1===s&&setTimeout(function(){1===s?void 0!==t&&t.call(r,a.$data,e):i.call(r,a.$data,e),s=0},n)}else o.call(r,a.$data,e)})}};var settings={featuredMaximizeDelay:750,zoomInAmount:14,zoomInterval:500,defaultMapType:"roadmap",slick:{featured:{infinite:!0,slidesToShow:1,autoplay:!0,autoplaySpeed:5e3,draggable:!0,arrows:!0,dots:!1,slidesToShow:1,centerMode:!1,variableWidth:!1},locationSwitcher:{speed:300,infinite:!0,slidesToShow:1,autoplay:!1,draggable:!0,dots:!1,arrows:!1}}},map,locations,focusedMarker,mapSettings,markers=ko.observableArray(),focusedMarker=ko.observable(0),screen={size:ko.observable(),updateSize:function(){"none"!==$(".featured_minimize").css("display")?screen.size("small"):screen.size("large")}};screen.updateSize();var displays={locationList:{displaying:ko.observable(!0),toggle:function(e){displays.locationSwitcher.displayTip(!1),"hide"===e?displays.locationList.displaying(!1):displays.locationList.displaying(!displays.locationList.displaying())}},locationSwitcher:{displaying:ko.observable(!0),displayList:ko.observable(!0),displayTip:ko.observable(!0),toggle:function(){displays.locationSwitcher.displaying(!displays.locationSwitcher.displaying())}},featured:{displaying:ko.observable(!1),container:[{displaying:ko.observable(!1),minimized:ko.observable(!1),index:ko.observable(0)},{displaying:ko.observable(!1),minimized:ko.observable(!1),index:ko.observable(0)}],toggle:function(e){displays.featured.displaying(e),setTimeout(function(){displays.featured.displaying()!==!1&&displays.featured.container[e].displaying(!displays.featured.container[e].displaying()),displays.featured.container[e].minimized(!1),"small"==screen.size()&&displays.featured.container[e].minimized(!0)},1)},hide:function(){displays.featured.container[displays.featured.displaying()].minimized(!1),displays.locationSwitcher.toggle(),displays.featured.container[displays.featured.displaying()].displaying(!1),displays.featured.displaying(!1),displays.featured.wikipedia.displaying(!1),isZooming?(stopZooming=!0,setTimeout(function(){resetZoomAndMap()},250)):resetZoomAndMap()},toggleMinimize:function(){displays.featured.container[displays.featured.displaying()].minimized(!displays.featured.container[displays.featured.displaying()].minimized())},minimize:function(){displays.featured.container[displays.featured.displaying()].minimized(!0)},maximize:function(){displays.featured.container[displays.featured.displaying()].minimized(!1)},toggleAvailable:function(e){displays.featured.displaying()===!1?(displays.featured.toggle(0),displays.locationSwitcher.toggle(),displays.locationList.toggle("hide")):0===displays.featured.displaying()?(displays.featured.toggle(0),displays.featured.toggle(1)):1===displays.featured.displaying()&&(displays.featured.toggle(1),displays.featured.toggle(0)),displays.featured.populate(displays.featured.displaying(),e),setTimeout(function(){slickCarousel.reslick($(".featured_image_container"),settings.slick.featured)},600)},populate:function(e,t){displays.featured.container[e].index(t)},wikipedia:{displaying:ko.observable(!1),toggle:function(e){displays.featured.wikipedia.displaying(!displays.featured.wikipedia.displaying())},toggleAndDeselect:function(){displays.featured.wikipedia.toggle(),window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}}}},slickCarousel={reslick:function(e,t){e.attr("class").indexOf("slick")!==-1&&e.eq(0).slick("unslick"),e.eq(0).slick(t)},rebind:function(e){e.on("beforeChange",function(e,t,i,r){focusMarker(slickCarousel.convert.index.carouselToMarker(r))})},swipeList:{next:function(){$(".location_switcher_swipe_list").slick("slickNext")},previous:function(){$(".location_switcher_swipe_list").slick("slickPrev")}},convert:{index:{markerToCarousel:function(e){for(var t=!1,i=markers()[e],r=filter.markers().length,a=0;a<r;a++){var o=filter.markers()[a];if(i.title==o.title)return t=!0,a}t||console.error("Can't scroll to "+i.title+" because it's currently not in the swipe list.")},carouselToMarker:function(e){for(var t=!1,i=filter.markers()[e],r=markers().length,a=0;a<r;a++){var o=markers()[a];if(void 0!==i&&void 0!==o&&i.title==o.title)return t=!0,a}if(!t)return 0}}},swipeListGoTo:function(e){$(".location_switcher_swipe_list").slick("slickGoTo",e)}},filter={markers:ko.observableArray([]),locationSwitcherInput:ko.observable(""),type:{hike:ko.observable(!1),restaurant:ko.observable(!1),landmark:ko.observable(!1),toggleHike:function(){this.hike(!this.hike()),filter.apply(filter.locationSwitcherInput())},toggleRestaurant:function(){this.restaurant(!this.restaurant()),filter.apply(filter.locationSwitcherInput())},toggleLandmark:function(){this.landmark(!this.landmark()),filter.apply(filter.locationSwitcherInput())}},getKeywords:function(e){return"hike"===e?{keywords:["Fjelltur","Tur"],icon:"fa fa-compass fa-lg"}:"restaurant"===e?{keywords:["Restaurant"],icon:"fa fa-cutlery fa-lg"}:"landmark"===e?{keywords:["Severdighet"],icon:"fa fa-map-marker fa-lg"}:void 0},active:function(){return!!(this.type.hike()||this.type.restaurant()||this.type.landmark())},apply:function(e){for(var t=[],i=0;i<markers().length;i++)filter.active()?(filter.markerVisibillity(markers()[i],!1),"Fjelltur"==markers()[i].type.keywords[0]&&filter.type.hike()?(filter.markerVisibillity(markers()[i],!0),t.push({title:markers()[i].koTitle(),index:i})):"Restaurant"==markers()[i].type.keywords[0]&&filter.type.restaurant()?(filter.markerVisibillity(markers()[i],!0),t.push({title:markers()[i].koTitle(),index:i})):"Severdighet"==markers()[i].type.keywords[0]&&filter.type.landmark()&&(filter.markerVisibillity(markers()[i],!0),t.push({title:markers()[i].koTitle(),index:i}))):(filter.markerVisibillity(markers()[i],!0),t.push({title:markers()[i].koTitle(),index:i}));filter.search(e,t)},markerVisibillity:function(e,t){e.koVisible(t),e.setVisible(t)},search:function(e,t){filter.markers([]),e=e.toLowerCase(),infoWindow.closeAll();t.filter(function(t){t.title=t.title.toLowerCase();for(var i=-1,r=0;r<e.length;r++){var a=e[r];if(" "!=a&&(i=t.title.indexOf(a,i+1),i==-1))return filter.markerVisibillity(markers()[t.index],!1),!1}return filter.markers.push(markers()[t.index]),!0});displays.locationSwitcher.displayList(!1),displays.locationSwitcher.displayList(!0),slickCarousel.reslick($(".location_switcher_swipe_list"),settings.slick.locationSwitcher),slickCarousel.rebind($(".location_switcher_swipe_list"));for(var i=$(".slick-slide"),r=i.length,a=r;a>0;a--){var o=i.eq(a).children().length;if(o<1){var s=i.eq(a).attr("data-slick-index");$(".location_switcher_swipe_list").slick("slickRemove",s)}}}};filter.locationSwitcherInput.subscribe(function(e){filter.apply(e)}),window.onload=function(){slickCarousel.reslick($(".location_switcher_swipe_list"),settings.slick.locationSwitcher),setTimeout(function(){displays.locationList.toggle(),displays.locationSwitcher.displayTip(!0)},500),filter.apply(filter.locationSwitcherInput())},window.onresize=function(e){screen.updateSize()};var ViewModel=function(){this.closeAndGoToMarker=function(){filter.markers().length>1?slickCarousel.swipeListGoTo(slickCarousel.convert.index.markerToCarousel(this.index)):focusMarker(slickCarousel.convert.index.markerToCarousel(this.index)),displays.locationList.toggle()}};ko.applyBindings(new ViewModel);var favoriteLocations=[{title:"Sverd i fjell",type:filter.getKeywords("landmark"),location:{lat:58.9413738,lng:5.6713647}},{title:"Stavanger domkirke",type:filter.getKeywords("landmark"),location:{lat:58.9696008,lng:5.7327193}},{title:"Langfossen",type:filter.getKeywords("landmark"),location:{lat:59.8454932,lng:6.339577}},{title:"Låtefossen",type:filter.getKeywords("landmark"),location:{lat:59.9475823,lng:6.5847937}},{title:"Baroniet Rosendal",type:filter.getKeywords("landmark"),location:{lat:59.9896187,lng:6.0289293}},{title:"Kongeparken",type:filter.getKeywords("landmark"),location:{lat:58.778757,lng:5.84055}},{title:"Utsira",type:filter.getKeywords("landmark"),location:{lat:59.308129,lng:4.8798742}},{title:"Tungenes fyr",type:filter.getKeywords("landmark"),location:{lat:59.0355653,lng:5.5795811}},{title:"Lundeneset VGS",type:filter.getKeywords("landmark"),location:{lat:59.6082346,lng:5.7730419}},{title:"Kjeragbolten",type:filter.getKeywords("hike"),location:{lat:59.0346734,lng:6.5753282}},{title:"Preikestolen",type:filter.getKeywords("hike"),location:{lat:58.9857634,lng:6.1575914}},{title:"Eikedalen Skisenter",type:filter.getKeywords("hike"),location:{lat:60.4067785,lng:5.9173345}},{title:"Trolltunga",type:filter.getKeywords("hike"),location:{lat:60.124167,lng:6.7378113}},{title:"Ulriken",type:filter.getKeywords("hike"),location:{lat:60.3774889,lng:5.3847581}},{title:"Flor & fjære",type:filter.getKeywords("restaurant"),location:{lat:59.0525365,lng:5.8230277}},{title:"Big Horn Steak House",type:filter.getKeywords("restaurant"),location:{lat:59.411882825000006,lng:5.26830164}},{title:"Døgnvill Burger",type:filter.getKeywords("restaurant"),foursquareID:"52d679b111d25266c4e5516a",location:{title:"Stavanger",lat:58.97089746248487,lng:5.731971859931946}},{title:"Godt Brød",type:filter.getKeywords("restaurant"),foursquareID:"5437ab1a498eaaadad1694b3",location:{title:"Fløyen",lat:60.392535236019825,lng:5.329849650529285}}],ajax={title:"",wikipedia:{url:"https://no.wikipedia.org/w/api.php"},flickr:{key:"e896b44b17e42a28558673f7db2b3504",url:"https://www.flickr.com/services/rest/",imgCount:15},nasjonalturbase:{key:"9718dda12c871525b0c2d976e02986c68de29abe",url:"http://api.nasjonalturbase.no/v0/turer/"},foursquare:{client_id:"4XOTGB0SVZCNGUSLZU3NKHLFIYDCGDETYBIGDU3MIGU22APY",client_secret:"SYACHZ3AU3X35J0LN40N1JZ3R2SBVZO0SI33BLCY4VVXNAKO",url:"https://api.foursquare.com/v2/"},openweathermap:{appid:"515c3aceb83a67504fa48539d20aff3a",url:"http://api.openweathermap.org/"},getExternalResources:function(){function e(e,t){$.ajax({url:ajax.foursquare.url+"venues/"+e,dataType:"json",data:{v:Date.now(),ll:markers()[t].position.lat()+","+markers()[t].position.lng(),format:"json",sort:"popular",client_id:ajax.foursquare.client_id,client_secret:ajax.foursquare.client_secret}}).done(function(e){var i,r,a=markers()[t],o=e.response.venue,s=o.photos.groups[0].items;a.foursquare.venue(e.response.venue),a.foursquare.hasContent(!0);for(var n=0;n<s.length;n++){var l=s[n],d=l.user.firstName,p=l.user.lastName||"";i=l.prefix+"579x400"+l.suffix,r={name:d+" "+p},a.foursquare.img.push({url:i,credit:r})}a.foursquare.calculate()}).fail(function(e,i,r){var a=markers()[t];console.error("Foursquare is not responding! (Error code: "+e.status+")"),a.foursquare.hasContent(!0),a.foursquare.error.hasError(!0)})}console.log("Getting external resources!");for(var t=markers().length,i=0;i<t;i++)ajax.title=markers()[i].koTitle(),function(e){$.ajax({url:ajax.wikipedia.url+"?prop=info%7Cextracts",dataType:"jsonp",data:{titles:ajax.title,action:"query",prop:"info|extracts",inprop:"url",format:"json"}}).done(function(t){var i=markers()[e],r=Object.getOwnPropertyNames(t.query.pages)[0],a=t.query.pages,o=a[r].extract;if(o)var s=o.split("</p>");var n="",l="";if(s)if(i.wikipedia.hasContent(!0),s[0].length<=3){l=s[1],articleTextLength=s.length;for(var d=2;d<articleTextLength;d++)n+=s[d]}else{l=s[0],articleTextLength=s.length;for(var d=1;d<articleTextLength;d++)n+=s[d]}i.wikipedia.ingress(l),i.wikipedia.bodyText(n),i.wikipedia.url(a[r].fullurl)}).fail(function(t,i,r){var a=markers()[e];console.error("Wikipedia is not responding! (Error code: "+t.status+")"),a.wikipedia.hasContent(!0),a.wikipedia.error.hasError(!0)})}(i),"Restaurant"!=markers()[i].type.keywords[0]&&!function(e){$.ajax({url:ajax.flickr.url,type:"GET",dataType:"text",data:{method:"flickr.photos.search",sort:"interestingness-desc",extras:"owner_name",text:markers()[e].koTitle(),format:"json",api_key:ajax.flickr.key}}).done(function(t){var i=JSON.parse(t.slice(14,t.length-1)),r=ajax.flickr.imgCount;i.photos.photo.length<ajax.flickr.imgCount&&(r=i.photos.photo.length,console.warn(markers()[e].koTitle()+" doesn't have the desired amout of pictures. ("+i.photos.photo.length+" of the desired "+ajax.flickr.imgCount+")"));for(var a=0;a<r;a++)!function(e,t){$.ajax({url:ajax.flickr.url+"?&?callback=?",dataType:"text",data:{method:"flickr.photos.getSizes",photo_id:i.photos.photo[e].id,format:"json",api_key:ajax.flickr.key}}).done(function(r){if(i.photos.photo[e]){var a=markers()[t],o=JSON.parse(r.slice(14,r.length-1));a.flickr.img.push({url:o.sizes.size[5].source,credit:{name:i.photos.photo[e].ownername}}),a.flickr.hasContent(!0)}}).fail(function(e,t,i){})}(a,e)}).fail(function(t,i,r){console.error("Flickr is not responding! (Error code: "+t.status+")");var a=markers()[e];a.flickr.error.hasError(!0),a.flickr.hasContent(!0)})}(i),"Restaurant"==markers()[i].type.keywords[0]&&(markers()[i].foursquareID?e(markers()[i].foursquareID,i):!function(t){$.ajax({url:ajax.foursquare.url+"venues/search",type:"GET",dataType:"json",data:{v:Date.now(),ll:markers()[t].position.lat()+","+markers()[t].position.lng(),format:"json",client_id:ajax.foursquare.client_id,client_secret:ajax.foursquare.client_secret}}).done(function(i){for(var r=markers()[t],a=0,o=0;o<i.response.venues.length;o++)if(i.response.venues[o].name.toLowerCase().indexOf(r.koTitle().toLowerCase())!==-1){a++;var s=i.response.venues[o];r.foursquareID=s.id,e(s.id,t)}a<1&&console.error("No venues found matching: "+markers()[t].koTitle()+", please add a Foursquare venue id!")}).fail(function(e,i,r){console.error("Foursquare is not responding! (Error code: "+e.status+")");var a=markers()[t];a.foursquare.hasContent(!0),a.foursquare.error.hasError(!0)})}(i)),"Fjelltur"==markers()[i].type.keywords[0]&&!function(e){$.ajax({url:ajax.openweathermap.url+"data/2.5/forecast?",type:"GET",dataType:"json",data:{lat:markers()[e].position.lat(),lon:markers()[e].position.lng(),format:"json",appid:ajax.openweathermap.appid}}).done(function(t){var i=markers()[e];i.openweathermap.data(t),i.openweathermap.hasContent(!0)}).fail(function(t,i,r){var a=markers()[e];console.error("OpenWeatherMaps are not responding! (Error code: "+t.status+")"),a.openweathermap.hasContent(!0),a.openweathermap.error.hasError(!0)})}(i)}},stopZooming=!1,isZooming=!1,infoWindow={populate:function(e,t){e.infoWindow||(e.infoWindow=new google.maps.InfoWindow),e.infoWindow.setContent('<div class="info_window"><h5>'+e.title+"</h5><p>"+markers()[e.index].wikipedia.ingress()+'</p><button class="full_width_button" onclick="readMore('+e.index+')">Les meir</button></div>'),e.infoWindow.addListener("closeclick",function(){e.infoWindow.close(),toggleBounce(e)}),e.infoWindow.open(map,e)},closeAll:function(e){for(var t=markers().length,i=0;i<t;i++)e?(markers()[i].koTitle()!==e.koTitle()&&markers()[i].infoWindow&&null!==markers()[i].infoWindow.anchor&&markers()[i].infoWindow.close(),markers()[i].setAnimation(null)):markers()[i].infoWindow&&(markers()[i].infoWindow.close(),markers()[i].setAnimation(null))}};